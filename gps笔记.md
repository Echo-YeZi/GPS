## 1.GNSS

>  GNSS的全称是全球导航卫星系统（Global NavigationSatellite System），它是泛指所有的卫星导航系统

**包括**

1. 全球系统,如美国的GPS,中国的北斗导航系统
2. 区域系统,如日本的QZSS,印度的IRNSS
3. 增强系统(SBAS,用于辅助全球和区域系统),如没过的WAAS(广域增强系统),欧洲的EGNOS(欧洲静地导航重叠系统)和日本的MSAS(多功能运输卫星增强系统)

![img](https://img-blog.csdn.net/20170520205410541?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

### 1.1 SBAS

>  SBAS（Satellite-Based Augmentation System），即星基增强系统，通过地球静止轨道（GEO）卫星搭载卫星导航增强信号转发器，可以向用户播发星历误差、卫星钟差、电离层延迟等多种修正信息，实现对于原有卫星导航系统定位精度的改进

**工作原理**

1. 由大量分布极广的差分站（位置已知）对导航卫星进行监测，
2. 获得原始定位数据（伪距、载波相位观测值等）并送至中央处理设施（主控站）
3. 后者通过计算得到各卫星的各种定位修正信息，
4. 通过上行注入站发给GEO卫星，
5. 最后将修正信息播发给广大用户，从而达到提高定位精度的目的

### 1.2 GPS

> GPS是英文Global Positioning System（全球定位系统）的简称。它是一个由覆盖全球的24颗卫星组成的卫星系统。
> 其目的是在全球范围内对地面和空中目标进行准确定位和监测
> 导航卫星至少24颗，均匀分布在6个极地轨道上，轨道的夹角为60度，距地平均高度为20200公里，每12恒星时绕地球一周

**GPS包括三大部分**

1. 地面控制站;

   > 由监测站(Monitor Station）、主控制站（Master Monitor Station）、地面天线（Ground Antenna）所组成，主控制站位于美国科罗拉多州春田市（Colorado. Springfield）。
   > 地面控制站负责收集由卫星传回之讯息，并计算卫星星历、相对距离，大气校正等数据。

2. 导航卫星;

   > 24颗卫星组成（21颗工作卫星；3颗备用卫星）,运行周期为12h,卫
   > 星的分布使得在全球任何地方、任何时间都可观测到4 颗以上的卫星，并能在卫星中预存导航信息

3. 用户接收机（GPS的移动用户端）

   > 用户设备部分即GPS信号接收机。其主要功能是能够捕获到按一定卫星截止角所选择的待测卫星，并跟踪这些卫星的运行。
   > 当接收机捕获到跟踪的卫星信号后，就可测量出接收天线至卫星的伪距离和距离的变化率，解调出卫星轨道参数等数据。
   > 根据这些数据，接收机中的微处理计算机就可按定位解算方法进行定位计算，计算出用户所在地理位置的经纬度、高度、速度、时间等信息。
   > 接收机硬件和机内软件以及GPS 数据的后处理软件包构成完整的GPS 用户设备

#### 1.2.1 GPS原理

>  测量出已知位置的卫星到用户接收机之间的距离，然后综合多颗卫星的数据就可知道接收机的具体位置

> 导航电文包括卫星星历、工作状况、时钟改正、电离层时延修正、大气折射修正等信息。
>
> > 它是从卫星信号中解调制出来，导航电文中的内容主要有遥测码、转换码、第1、2、3数据块，其中最重要的则为星历数据
>
> GPS导航系统卫星部分的作用就是不断地发射导航电文
>
> >想知道接收机所处的位置，至少要能接收到4个卫星的信号,从而获得x,y,z三个维度的数据
> >
> >通过4个卫星的x,y,z坐标信息和时间差,计算出用户的xyz数据
> >再将空间坐标系转换为大地坐标系(XYZ-BLH)
> >
> >- 迭代算法
>  ![img](https://img-blog.csdn.net/20170520210053544?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
>  ![img](https://img-blog.csdn.net/20170520210148028?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
> >- 直接算法
> >
> >![img](https://img-blog.csdn.net/20170520210232746?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

#### 1.2.2 地球经纬度

1. 经度longitude
   
   > 定义为地球面上一点与两极的连线与0度经线所在平面的夹角,以球面上的点所在辅圈相对于坐标原点所在辅圈的角距离来表示
   > 定为0°经线也叫本初子午线，它的东面的为东经，共180度，在它西面的为西经，共180度

2. 纬度latitude

   > 是指某地地面法线对赤道面的夹角，其数值在0至90度之间
   > 位于赤道以北的点的纬度叫北纬，记为N;北极就是北纬90度
   > 位于赤道以南的点的纬度称南纬，记为S;南极就是南纬90度

3. 经纬度表示

   > 度、分、秒间的进 制是60进制，度.度、分.分、秒.秒的进制是100进制

4. 经纬度转换

   > 近似地认为每个纬度之间的距离是不变的111KM，每分间 1.85KM，每秒间31.8M
   > 经度1°长度=111.413cosφ一0.094cos3φ公里(纬度φ处)

#### 1.2.3 GPS卫星信号结构

> 都是在同一基准频率F0=10.23MHZ的控制下产生的

1. 50Hz导航电文(D码)
2. 伪随机码(C/A码或P码)
3. 载波(Ll，L2波段)

![img](https://img-blog.csdn.net/20170520210512592?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)

**GPS卫星所采用两种测距码,均属于伪随机码**

1. C/A码;

   > 由两个10级反馈移位寄存器组合而产生

   > - 码长Nu=1024-1=1023比特，码元宽为tu=1/f1=0.97752s,（f1为基准频率f0的10分之1，1.023 MHz）,
   > - 相应的距离为293.1m。周期为Tu= Nutu=1ms，数码率为1.023Mbit/s。
   >   C/A码的码长短，共1023个码元，若以每秒50码元的速度搜索，只需20.5s，易于捕获，称捕获码。
   > - 码元宽度大，假设两序列的码元对齐误差为为码元宽度的1/100，则相应的测距误差为2.9m。由于精度低，又称粗码

2. P码

   > 两组各由12级反馈移位寄存器构

   > - 码长Nu=2.35*10^14比特，码元宽为tu=1/f0=0.097752s，相应的距离为29.3m。周期为Tu= Nutu=267d，数码率为10.23Mbit/s。
   > - P码的周期长，267天重复一次，实际应用时P码的周期被分成38部分，（每一部分为7天，码长约6.19 ，1012比特）
   >   其中1部分闲置，5部分给地面监控站使用，32部分分配给不同卫星，每颗卫星使用P码的不同部分，都具有相同的码长和周期，
   >   但结构不同。P码的捕获一般是先捕获C/A码，再根据导航电文信息，捕获P码。由于P码的码元宽度为C/A码的1/10，
   > - 若取码元对齐精度仍为码元宽度的1/100，则相应的距离误差为0.29m，故P码称为精码。

3. 导航电文

   > 包含有关卫星的参考星历（星历是指在GPS测量中，天体运行随时间而变的精确位置或轨迹表，它是时间的函数）、卫星工作状态、时间改正参数、卫星钟运行状态、轨道摄动改正、大气折射改正和由C/A码捕获P码等导航信息的数据码（或D码）
   >

   >- 二进制码，依规定格式组成，按帧向外播送。
   > - 每帧电文含有1500比特，播送速度50bit/s，每帧播送时间30s。
   >   每帧导航电文含5个子帧，每个子帧分别含有10个字，每个字30比特，故每个子帧共300比特，播发时间6s。
   > - 为记载多达25颗卫星，子帧4、5各含有25页。子帧1、2、3和子帧4、5的每一页构成一个主帧。
   >   主帧中1、2、3的内容每小时更新一次，4、5的内容仅当给卫星注入新的导航电文后才得以更新。
   
   > **导航电文格式**
   >
   > ![img](https://img-blog.csdn.net/20170520210635500?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
   >
   > **一帧导航电文的内容**
   >
   > ![img](https://img-blog.csdn.net/20170520210715439?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjQzOTQxNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
   >
   > ①   遥测字（TLM-Telemetry WORD）
   >
   > > 位于每个子帧的开头，作为捕获导航电文的前导。
   >
   > ②    转换码（交接字）（HOW-Hand Over Word）    
   >
   > > 紧接各子帧的遥测字，主要向用户提供用于捕获P码的Z记数。所谓Z记数是从每个星期六/星期日子夜零时起算的时间记数（1.5s），表明下一子帧开始瞬间的GPS时。
   >
   > ③     数据块1D：含有卫星钟改正参数及数据龄期、星期的周数编号、电离层改正参数、和卫星工作状态等信息。
   >
   > > 卫星钟改正参数a0、a1、a2分别表示该卫星的钟差、钟速和钟速变化率。
   >
   > ④ 数据块2：包含在2、3两个子帧里，主要向用户提供有关计算该卫星运行位置的信息。
   >
   > > 该数据一般称为卫星星历，每30s重复1次，每小时更新一次。
   > 
   > ⑤数据块3：包含在4、5两个子帧中，主要向用户提供其他GPS卫星的概略星历及其工作状态信息，称为卫星的历书。
   >
   > > 第3数据块的内容每12.5分钟重复一次，每天更新一次。

